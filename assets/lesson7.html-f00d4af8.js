import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as e,d as s}from"./app-8616d07c.js";const t="/assets/images/vasvari/db/torpok_kapcsolat.png",l={},o=s('<h1 id="gyakorlo-feladat-iii" tabindex="-1"><a class="header-anchor" href="#gyakorlo-feladat-iii" aria-hidden="true">#</a> Gyakorló feladat III.</h1><p>Az alábbi feladatban egy relációs adatbázison kell dolgoznia, amely a törpék bányászati adatait tartalmazza. A feladatok megoldására elkészített SQL parancsokat a <strong>megoldasok.sql</strong> állományba illessze be.</p><h2 id="dombi-torpek" tabindex="-1"><a class="header-anchor" href="#dombi-torpek" aria-hidden="true">#</a> Dombi törpék</h2><p>A dombi törpék egész évben szorgosan bányásznak. Tíz tárnában dolgoznak, aranyat, vasat, ezüstöt és rezet hoznak fel a föld mélyéből. A klánokba szerveződött törpék társadalmában a nők is ugyanúgy kiveszik a munkából a részüket, mint a férfiak, azaz ők is bányásznak. Minden törpe több helyen is dolgozhatott az év folyamán, egyszer vasat keresett, máskor például aranyat.</p><p>Az adatbázis a következő táblákat tartalmazza:</p><table><thead><tr><th style="text-align:center;">kozetek</th><th style="text-align:center;">id, nev</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">egész szám, a kőzet azonosítója, elsődleges kulcs</td></tr><tr><td style="text-align:center;">nev</td><td style="text-align:center;">szöveges, a kőzet elnevezése</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">torpek</th><th style="text-align:center;">id, nev, klan, nem, suly, magassag</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">egész szám, a törpe azonosítója, elsődleges kulcs</td></tr><tr><td style="text-align:center;">nev</td><td style="text-align:center;">szöveges, a törpe neve</td></tr><tr><td style="text-align:center;">klan</td><td style="text-align:center;">szöveges, a törpe klánjának neve</td></tr><tr><td style="text-align:center;">nem</td><td style="text-align:center;">szöveges, a törpe neme</td></tr><tr><td style="text-align:center;">suly</td><td style="text-align:center;">szám, a törpe súlya</td></tr><tr><td style="text-align:center;">magassag</td><td style="text-align:center;">szám, a törpe testmagassága</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">tarnak</th><th style="text-align:center;">id, nev, kozet_id</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">egész szám, elsődleges kulcs</td></tr><tr><td style="text-align:center;">nev</td><td style="text-align:center;">szöveges, a tárna neve</td></tr><tr><td style="text-align:center;">kozet_id</td><td style="text-align:center;">egész szám, a tárnában bányászott kőzet azonosítója, idegenkulcs</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">kihol</th><th style="text-align:center;">torpe_id, tarna_id, kitermelt_mennyiseg</th></tr></thead><tbody><tr><td style="text-align:center;">torpe_id</td><td style="text-align:center;">egész szám, a tárnában dolgozó törpe azonosítója, elsődleges és idegenkulcs</td></tr><tr><td style="text-align:center;">tarna_id</td><td style="text-align:center;">egész szám, a tárna azonosítója, elsődleges és idegenkulcs</td></tr><tr><td style="text-align:center;">kitermelt_mennyiseg</td><td style="text-align:center;">egész szám, a törpe által adott tárnában kitermelt kőzetmennyiség</td></tr></tbody></table><figure><img src="'+t+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="feladatok" tabindex="-1"><a class="header-anchor" href="#feladatok" aria-hidden="true">#</a> Feladatok</h3><ol><li><p>Hozzon létre a lokális SQL szerveren TorpeTarna néven adatbázist! Az adatbázis alapértelmezett rendezési sorrendje a magyar szabályok szerinti legyen! Ha az Ön által választott SQL szervernél nem alapértelmezés az UTF-8 kódolás, akkor azt is állítsa be alapértelmezettnek az adatbázis létrehozásánál! (1. feladat:)</p></li><li><p>A <a style="font-weight:bold;" href="/src/torpok/tablak.sql" target="_blank">tablak.sql</a> és az <a style="font-weight:bold;" href="/src/torpok/adatok.sql" target="_blank">adatok.sql</a> állományok tartalmazzák a táblákat létrehozó és az adatokat a táblába beszúró SQL parancsokat! Futtassa elsőként a tablak.sql, majd az adatok.sql parancsfájlt a TorpeTarna adatbázisban.</p></li><li><p>Állítsa be a következő ábra szerint és a fenti leírás alapján az idegenkulcsokat a tarnak és a kihol táblákban! A létrehozó SQL utasításokat másolja be a megoldas.sql fájlba! (3. feladat:)</p><p><em>Készítsen lekérdezéseket, amelyek választ adnak a következő feladatokra! Ügyeljen arra, hogy a lekérdezésben pontosan a kívánt mezők a megadott névvel szerepeljenek, és felesleges mezőt ne jelenítsen meg!</em></p></li><li><p>Ki a legmagasabb törpe, és hány centiméter? (4. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Hardi Beronn | 139
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Hány törpe dolgozott az elmúlt évben <em>Gir Lodur</em> aranybányáiban? (5. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>A legjövedelmezőbb bányászati termék az arany. Melyik tárnákból termeltek ki aranyat a törpék, és mekkora mennyiséget? A válasz legyen aranymennyiség szerint csökkenő sorrendben! (6. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Moldirth    |   1904
Gir Lodur   |   1679
Khaldarim   |   1605
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>A Vasököl klán vezetője, <em>Sarsi Duri</em> úgy döntött, idén tavasszal házasodni kíván. Kiszemeltje a Vasököl klán legszorgosabb hölgye, aki a legtöbb kőzetet fejtette a bányákban. Ki ő? (7. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Ymed Surrag
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Az év közepén új törpe érkezett a Vasököl klánba. Neve: Trad Morf, férfi, 136 cm magas és testsúlya 69 kg. Vegye fel az adatbázisba! A felvételhez készített SQL utasítást másolja be a megoldas.sql fájlba! (8. feladat:)</p></li><li><p><em>Trad Morf</em> szorgos törpe, <em>Gir Lodur</em>-ban 43 kg aranyat bányászott, <em>Moldirth</em>-ban pedig 28 kg kőzetet termelt ki. Vegye fel az adatokat a megfelelő táblába! Megoldása több pontot ér, ha az azonosítókat lekérdezések segítségével határozza meg. (9. feladat:)</p></li></ol><h3 id="megoldasok" tabindex="-1"><a class="header-anchor" href="#megoldasok" aria-hidden="true">#</a> Megoldások</h3><ol><li><p>Ki a legmagasabb törpe, és hány centiméter? (4. feladat:)</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> nev<span class="token punctuation">,</span> 
       magassag 
<span class="token keyword">FROM</span>   torpek 
<span class="token keyword">ORDER</span>  <span class="token keyword">BY</span> magassag <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span>  <span class="token number">1</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Hány törpe dolgozott az elmúlt évben <em>Gir Lodur</em> aranybányáiban?</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>   kihol<span class="token punctuation">,</span> 
       tarnak 
<span class="token keyword">WHERE</span>  kihol<span class="token punctuation">.</span>tarna_id <span class="token operator">=</span> tarnak<span class="token punctuation">.</span>id 
       <span class="token operator">AND</span> tarnak<span class="token punctuation">.</span>nev <span class="token operator">=</span> <span class="token string">&quot;Gir Lodur&quot;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>A legjövedelmezőbb bányászati termék az arany. Melyik tárnákból termeltek ki aranyat a törpék, és mekkora mennyiséget? A válasz legyen aranymennyiség szerint csökkenő sorrendben!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> tarnak<span class="token punctuation">.</span>nev<span class="token punctuation">,</span> 
       <span class="token function">Sum</span><span class="token punctuation">(</span>kihol<span class="token punctuation">.</span>kitermelt_mennyiseg<span class="token punctuation">)</span> <span class="token keyword">AS</span> mennyiseg 
<span class="token keyword">FROM</span>   kihol<span class="token punctuation">,</span> 
       tarnak<span class="token punctuation">,</span> 
       kozetek 
<span class="token keyword">WHERE</span>  kihol<span class="token punctuation">.</span>tarna_id <span class="token operator">=</span> tarnak<span class="token punctuation">.</span>id
       <span class="token operator">AND</span> tarnak<span class="token punctuation">.</span>kozet_id <span class="token operator">=</span> kozetek<span class="token punctuation">.</span>id
       <span class="token operator">AND</span> kozetek<span class="token punctuation">.</span>nev <span class="token operator">=</span> <span class="token string">&quot;arany&quot;</span> 
<span class="token keyword">GROUP</span>  <span class="token keyword">BY</span> tarnak<span class="token punctuation">.</span>nev 
<span class="token keyword">ORDER</span>  <span class="token keyword">BY</span> mennyiseg 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>A Vasököl klán vezetője, <em>Sarsi Duri</em> úgy döntött, idén tavasszal házasodni kíván. Kiszemeltje a Vasököl klán legszorgosabb hölgye, aki a legtöbb kőzetet fejtette a bányákban. Ki ő?</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> nev 
<span class="token keyword">FROM</span>   torpek<span class="token punctuation">,</span> 
       kihol 
<span class="token keyword">WHERE</span>  kihol<span class="token punctuation">.</span>torpe_id <span class="token operator">=</span> torpek<span class="token punctuation">.</span>id 
       <span class="token operator">AND</span> klan <span class="token operator">=</span> <span class="token string">&quot;Vasököl&quot;</span> 
       <span class="token operator">AND</span> nem <span class="token operator">=</span> <span class="token string">&quot;Nő&quot;</span> 
<span class="token keyword">GROUP</span>  <span class="token keyword">BY</span> id 
<span class="token keyword">ORDER</span>  <span class="token keyword">BY</span> <span class="token function">Sum</span><span class="token punctuation">(</span>kihol<span class="token punctuation">.</span>kitermelt_mennyiseg<span class="token punctuation">)</span> <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span>  <span class="token number">1</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Az év közepén új törpe érkezett a Vasököl klánba. Neve: Trad Morf, férfi, 136 cm magas és testsúlya 69 kg. Vegye fel az adatbázisba! A felvételhez készített SQL utasítást másolja be a megoldas.sql fájlba!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> torpek <span class="token punctuation">(</span>nev<span class="token punctuation">,</span> klan<span class="token punctuation">,</span> nem<span class="token punctuation">,</span> suly<span class="token punctuation">,</span> magassag<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;Trad Morf&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Vasököl&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;férfi&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;69&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;136&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><em>Trad Morf</em> szorgos törpe, <em>Gir Lodur</em>-ban 43 kg aranyat bányászott, <em>Moldirth</em>-ban pedig 28 kg kőzetet termelt ki. Vegye fel az adatokat a megfelelő táblába! Megoldása több pontot ér, ha az azonosítókat lekérdezések segítségével határozza meg.</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> kihol<span class="token punctuation">(</span>torpe_id<span class="token punctuation">,</span> tarna_id<span class="token punctuation">,</span> kitermelt_mennyiseg<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> id <span class="token keyword">FROM</span> torpek <span class="token keyword">WHERE</span> nev <span class="token operator">=</span> <span class="token string">&#39;Trad Morf&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">SELECT</span> id <span class="token keyword">FROM</span> tarnak <span class="token keyword">WHERE</span> nev <span class="token operator">=</span> <span class="token string">&#39;Gir Lodur&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">)</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> kihol<span class="token punctuation">(</span>torpe_id<span class="token punctuation">,</span> tarna_id<span class="token punctuation">,</span> kitermelt_mennyiseg<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> id <span class="token keyword">FROM</span> torpek <span class="token keyword">WHERE</span> nev <span class="token operator">=</span> <span class="token string">&#39;Trad Morf&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">SELECT</span> id <span class="token keyword">FROM</span> tarnak <span class="token keyword">WHERE</span> nev <span class="token operator">=</span> <span class="token string">&#39;Moldirth&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,14),i=[o];function r(p,d){return n(),e("div",null,i)}const u=a(l,[["render",r],["__file","lesson7.html.vue"]]);export{u as default};
