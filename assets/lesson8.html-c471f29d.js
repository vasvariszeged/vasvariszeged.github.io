import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,d as t}from"./app-434ca933.js";const n="/assets/images/vasvari/db/webshop.jpg",l={},r=t('<h1 id="gyakorlo-feladat-iv" tabindex="-1"><a class="header-anchor" href="#gyakorlo-feladat-iv" aria-hidden="true">#</a> Gyakorló feladat IV.</h1><p>A feladatok megoldására elkészített SQL parancsokat a <strong>megoldasok.sql</strong> állományba illessze be. Ügyeljen arra, hogy a lekérdezésben pontosan a kívánt mezők a megadott névvel szerepeljenek, és felesleges mezőt ne jelenítsen meg!</p><h2 id="webshop" tabindex="-1"><a class="header-anchor" href="#webshop" aria-hidden="true">#</a> Webshop</h2><p>A következő feladatban egy sportklub szurkolói webshopjának adataival kell dolgoznia. Az adatbázisban a 2018. januári értékesítési adatok találhatók. Az adatbázis a következő táblákat tartalmazza (félkövér betűvel a tábla neve, alatta a mezőnevek):</p><table><thead><tr><th style="text-align:center;">termekek</th><th style="text-align:center;">(id, megnevezes, ar)</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">Egész szám, a termék kódja, <em>PK</em></td></tr><tr><td style="text-align:center;">megnevezes</td><td style="text-align:center;">Szöveg, a termék neve</td></tr><tr><td style="text-align:center;">ar</td><td style="text-align:center;">Numerikus, a termék bruttó egységára</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">vevok</th><th style="text-align:center;">(id, nev, iranyitoszam, telepules, utcahazszam)</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">Egész szám, a vevő azonosítója, <em>PK</em></td></tr><tr><td style="text-align:center;">nev</td><td style="text-align:center;">Szöveg, a vevő neve</td></tr><tr><td style="text-align:center;">iranyitoszam</td><td style="text-align:center;">Szöveg, a vevő szállítási címéből az irányítószám</td></tr><tr><td style="text-align:center;">telepules</td><td style="text-align:center;">Szöveg, a vevő szállítási címéből a település neve</td></tr><tr><td style="text-align:center;">utcahazszam</td><td style="text-align:center;">Szöveg, a vevő szállítási címéből az utca és a házszám</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">szamlafej</th><th style="text-align:center;">(id, szamlaszam, kelt, teljesites, vevoid)</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">Egész szám, a számla azonosítója, <em>PK</em></td></tr><tr><td style="text-align:center;">szamlaszam</td><td style="text-align:center;">Szöveg, a kiállított számla száma, egyedi</td></tr><tr><td style="text-align:center;">kelt</td><td style="text-align:center;">Dátum, a számla kiállításának kelte</td></tr><tr><td style="text-align:center;">teljesites</td><td style="text-align:center;">Dátum, a számla teljesítésének, azaz a kiszállításnak a dátuma</td></tr><tr><td style="text-align:center;">vevoid</td><td style="text-align:center;">Egész szám, a vevő kódja a vevok táblából, <em>FK</em></td></tr></tbody></table><table><thead><tr><th style="text-align:center;">szamlatetel</th><th style="text-align:center;">(id, szamlafejid, termekid, mennyiseg, mennyisegiegyseg, bruttoegysegar, afaszazalek)</th></tr></thead><tbody><tr><td style="text-align:center;">id</td><td style="text-align:center;">Egész szám, a számlatétel azonosítója, PK</td></tr><tr><td style="text-align:center;">szamlafejid</td><td style="text-align:center;">Egész szám, a számla azonosítója a szamlafej táblából, <em>FK</em></td></tr><tr><td style="text-align:center;">termekid</td><td style="text-align:center;">Egész szám, a termék azonosítója a termekek táblából, <em>FK</em></td></tr><tr><td style="text-align:center;">mennyiseg</td><td style="text-align:center;">Egész szám, a termékből rendelt mennyiség</td></tr><tr><td style="text-align:center;">mennyisegiegyseg</td><td style="text-align:center;">Szöveg, a termék mennyiségi egysége (minden rekord esetében „db&quot;)</td></tr><tr><td style="text-align:center;">bruttoegysegar</td><td style="text-align:center;">Numerikus, 1 db termék bruttó egységára az eladáskor</td></tr><tr><td style="text-align:center;">afaszazalek</td><td style="text-align:center;">Egész szám, az eladáskor a termékre érvényes áfaszázalék (minden rekord esetében 27)</td></tr></tbody></table><p>Az elsődleges kulcsokat <em>PK</em>-val, az idegenkulcsokat <em>FK</em>-val jelöltük. A mező neve után annak típusa és leírása található. A feladatok pontosabb megértéséhez tanulmányozza a táblákban lévő rekordokat is!</p><h3 id="feladatok" tabindex="-1"><a class="header-anchor" href="#feladatok" aria-hidden="true">#</a> Feladatok</h3><ol><li><p>Hozzon létre a lokális SQL szerveren webshop néven adatbázist! Az adatbázis alapértelmezett rendezési sorrendje a magyar szabályok szerinti legyen! Ha az Ön által választott SQL szervernél nem alapértelmezés az <strong>UTF-8</strong> kódolás, akkor azt is állítsa be alapértelmezettnek az adatbázis létrehozásánál! (1. feladat:)</p></li><li><p>A <a style="font-weight:bold;" href="/src/webshop/tablak.sql" target="_blank">tablak.sql</a> és az <a style="font-weight:bold;" href="/src/webshop/adatok.sql" target="_blank">adatok.sql</a> állományok tartalmazzák a táblákat létrehozó és az adatokat a táblába beszúró SQL parancsokat! Futtassa elsőként a <strong>tablak.sql</strong>, majd az <strong>adatok.sql</strong> parancsfájlt a webshop adatbázisban!</p></li><li><p>Állítsa be a következő ábra szerint és a fenti leírás alapján az idegenkulcsokat a szamlafej és a szamlatetel táblákban! (3. feladat:)</p></li></ol><figure><img src="'+n+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="4"><li><p>Készítsen lekérdezést a webshop által kínált termékekről! A listában szerepeljen a termék neve és jelenlegi bruttó ára! A listát a termékek ára szerint növekvő sorrendbe rendezze! (4. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Sörnyitó    |   600
Kulacs      |   1200
Hűtőmágnes  |   1500
Kulcstartó  |   1500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>A bolt vezetése úgy döntött, hogy minden 5 000 Ft-nál drágább termék árát csökkenti 5%-kal. Végezze el az árak aktualizálását a termékek táblán (5. feladat:)!</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>9 sor érintett. (A lekérdezés 0.0060 másodpercig tartott.)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Lekérdezéssel határozza meg, mekkora volt a bruttó árbevétele a boltnak <strong>2018.01.01</strong> és <strong>2018.01.15</strong> között! A dátum ellenőrzésekor a számla teljesítési dátumát vegye alapul! Ügyeljen arra, hogy a számlatételben a bruttó egységár csak 1 db termékre vonatkozik! (6. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>2691200
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Listázza ki azokat a vevőket (név, település neve), akik szerepelnek a bolt nyilvántartásában, de januárban nem vásároltak! A listát névsorban jelenítse meg! (7. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Antal Andrea    |   Debrecen
Balázs Andrea   |   Siófok
Bíró Mária      |   Pápa
Fehér Sándor    |   Pécs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Listázza ki, hogy az árbevétel alapján melyik volt a három legnépszerűbb termék a vizsgált januári időszakban! A listában szerepeljen a termék neve és a bruttó árbevétel összege, árbevétel szerint csökkenő sorrendben! (8. feladat:)</p><div class="language-TXT line-numbers-mode" data-ext="TXT"><pre class="language-TXT"><code>Hivatalos mez       |   1194000
Szabadidő felső     |   652500
Vásárlási utalvány  |   580000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="megoldasok" tabindex="-1"><a class="header-anchor" href="#megoldasok" aria-hidden="true">#</a> Megoldások</h3><ol><li><p>Hozzon létre a lokális SQL szerveren webshop néven adatbázist! Az adatbázis alapértelmezett rendezési sorrendje a magyar szabályok szerinti legyen! Ha az Ön által választott SQL szervernél nem alapértelmezés az <strong>UTF-8</strong> kódolás, akkor azt is állítsa be alapértelmezettnek az adatbázis létrehozásánál!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> webshop
  <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8
  <span class="token keyword">COLLATE</span> utf8_hungarian_ci<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Készítsen lekérdezést a webshop által kínált termékekről! A listában szerepeljen a termék neve és jelenlegi bruttó ára! A listát a termékek ára szerint növekvő sorrendbe rendezze!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> megnevezes<span class="token punctuation">,</span> ar
<span class="token keyword">FROM</span> termekek
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> ar<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>A bolt vezetése úgy döntött, hogy minden 5 000 Ft-nál drágább termék árát csökkenti 5%-kal. Végezze el az árak aktualizálását a termékek táblán.</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> termekek 
<span class="token keyword">SET</span> ar <span class="token operator">=</span> ar <span class="token operator">*</span> <span class="token number">0.95</span>
<span class="token keyword">WHERE</span> ar <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Lekérdezéssel határozza meg, mekkora volt a bruttó árbevétele a boltnak 2018.01.01 és 2018.01.15 között! A dátum ellenőrzésekor a számla teljesítési dátumát vegye alapul! Ügyeljen arra, hogy a számlatételben a bruttó egységár csak 1 db termékre vonatkozik!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">Sum</span><span class="token punctuation">(</span>mennyiseg <span class="token operator">*</span> bruttoegysegar<span class="token punctuation">)</span> <span class="token keyword">AS</span> arbevetel 
<span class="token keyword">FROM</span>   szamlatetel<span class="token punctuation">,</span> 
       szamlafej 
<span class="token keyword">WHERE</span>  szamlatetel<span class="token punctuation">.</span>szamlafejid <span class="token operator">=</span> szamlafej<span class="token punctuation">.</span>id 
       <span class="token operator">AND</span> szamlafej<span class="token punctuation">.</span>teljesites <span class="token operator">BETWEEN</span> <span class="token string">&#39;2018.01.01&#39;</span> <span class="token operator">AND</span> <span class="token string">&#39;2018.01.15&#39;</span><span class="token punctuation">;</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Listázza ki azokat a vevőket (név, település neve), akik szerepelnek a bolt nyilvántartásában, de januárban nem vásároltak! A listát névsorban jelenítse meg!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> vevok<span class="token punctuation">.</span>nev<span class="token punctuation">,</span> 
       vevok<span class="token punctuation">.</span>telepules 
<span class="token keyword">FROM</span>   vevok 
<span class="token keyword">WHERE</span>  nev <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> vevok<span class="token punctuation">.</span>nev 
                   <span class="token keyword">FROM</span>   vevok<span class="token punctuation">,</span> 
                          szamlafej 
                   <span class="token keyword">WHERE</span>  vevok<span class="token punctuation">.</span>id <span class="token operator">=</span> szamlafej<span class="token punctuation">.</span>vevoid
	           <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> vevok<span class="token punctuation">.</span>id<span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> vevok<span class="token punctuation">.</span>nev 

vagy

<span class="token keyword">SELECT</span> vevok<span class="token punctuation">.</span>nev<span class="token punctuation">,</span> 
   vevok<span class="token punctuation">.</span>telepules 
<span class="token keyword">FROM</span>   vevok 
   <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> szamlafej 
          <span class="token keyword">ON</span> vevok<span class="token punctuation">.</span>id <span class="token operator">=</span> szamlafej<span class="token punctuation">.</span>vevoid 
<span class="token keyword">WHERE</span>  szamlafej<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span> 
<span class="token keyword">ORDER</span>  <span class="token keyword">BY</span> vevok<span class="token punctuation">.</span>nev<span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Listázza ki, hogy az árbevétel alapján melyik volt a három legnépszerűbb termék a vizsgált januári időszakban! A listában szerepeljen a termék neve és a bruttó árbevétel összege, árbevétel szerint csökkenő sorrendben!</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> termekek<span class="token punctuation">.</span>megnevezes<span class="token punctuation">,</span> 
       <span class="token function">SUM</span><span class="token punctuation">(</span>szamlatetel<span class="token punctuation">.</span>mennyiseg <span class="token operator">*</span> szamlatetel<span class="token punctuation">.</span>bruttoegysegar<span class="token punctuation">)</span> <span class="token keyword">AS</span> bevetel 
<span class="token keyword">FROM</span>   szamlatetel<span class="token punctuation">,</span> 
       termekek
<span class="token keyword">WHERE</span>  szamlatetel<span class="token punctuation">.</span>termekid <span class="token operator">=</span> termekek<span class="token punctuation">.</span>id 
<span class="token keyword">GROUP</span>  <span class="token keyword">BY</span> termekek<span class="token punctuation">.</span>megnevezes 
<span class="token keyword">ORDER</span>  <span class="token keyword">BY</span> bevetel <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span>  <span class="token number">3</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,15),i=[r];function d(o,p){return a(),s("div",null,i)}const v=e(l,[["render",d],["__file","lesson8.html.vue"]]);export{v as default};
